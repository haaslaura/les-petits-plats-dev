import{TagManager}from"../classes/TagManager.min.js";import{filterRecipes}from"./filterRecipes.min.js";export function chooseOptions(e,t,n){const o=t.filters,s=new TagManager(document.querySelector(".display-tag"),"dropdown",t,e);switch(n){case"dropdown-ingredients":{const c=document.getElementById(n).querySelectorAll("li"),l=()=>{const e=document.querySelectorAll(".tag");c.forEach((t=>{const n=t.textContent;let o=!1;e.forEach((e=>{e.querySelector("p").textContent===n&&(t.classList.add("tagged"),o=!0)})),o||t.classList.remove("tagged")}))},r=(n,c)=>{let r=o.selectedIngredients.lastIndexOf(c);if(-1!==r){o.selectedIngredients.splice(r,1);document.querySelectorAll(".tag").forEach((e=>{e.querySelector("p").textContent===c&&s.removeTag(e,n,"dropdown",c,"ingredient")}))}else s.createTag(c,n,"dropdown","ingredient"),o.selectedIngredients.push(c);filterRecipes(e,t),l()};c.forEach((e=>{const t=e.textContent;l(),e.addEventListener("click",(()=>r(e,t))),e.addEventListener("keydown",(n=>{"Enter"===n.key&&r(e,t)}))}));break}case"dropdown-appliances":{const c=document.getElementById(n).querySelectorAll("li"),l=()=>{const e=document.querySelectorAll(".tag");c.forEach((t=>{const n=t.textContent;let o=!1;e.forEach((e=>{e.querySelector("p").textContent===n&&(t.classList.add("tagged"),o=!0)})),o||t.classList.remove("tagged")}))},r=(n,c)=>{let r=o.selectedAppliances.lastIndexOf(c);if(-1!==r){o.selectedAppliances.splice(r,1);document.querySelectorAll(".tag").forEach((e=>{e.querySelector("p").textContent===c&&s.removeTag(e,n,"dropdown",c,"appliance")}))}else s.createTag(c,n,"dropdown","appliance"),o.selectedAppliances.push(c);filterRecipes(e,t),l()};c.forEach((e=>{const t=e.textContent;l(),e.addEventListener("click",(()=>r(e,t))),e.addEventListener("keydown",(n=>{"Enter"===n.key&&r(e,t)}))}));break}case"dropdown-utils":{const c=document.getElementById(n).querySelectorAll("li"),l=()=>{const e=document.querySelectorAll(".tag");c.forEach((t=>{const n=t.textContent;let o=!1;e.forEach((e=>{e.querySelector("p").textContent===n&&(t.classList.add("tagged"),o=!0)})),o||t.classList.remove("tagged")}))},r=(n,c)=>{let r=o.selectedUstensils.lastIndexOf(c);if(-1!==r){o.selectedUstensils.splice(r,1);document.querySelectorAll(".tag").forEach((e=>{e.querySelector("p").textContent===c&&s.removeTag(e,n,"dropdown",c,"ustensil")}))}else s.createTag(c,n,"dropdown","ustensil"),o.selectedUstensils.push(c);filterRecipes(e,t),l()};c.forEach((e=>{const t=e.textContent;l(),e.addEventListener("click",(()=>r(e,t))),e.addEventListener("keydown",(n=>{"Enter"===n.key&&r(e,t)}))}));break}default:console.log("Cette liste d'élément n'est pas pris en compte")}}